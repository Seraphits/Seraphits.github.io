"use strict";(self.webpackChunklearn_distribution_frontend=self.webpackChunklearn_distribution_frontend||[]).push([[892],{823:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ne});var n=r(149),o=r(800),s=r(883);class a extends o.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error(`Unhandled error caught by error boundary: ${e.message}`,{componentStack:t.componentStack,errorBoundary:"ErrorBoundary"},e)}render(){const{FallbackComponent:e}=this.props;return this.state.hasError?e?(0,n.jsx)(e,{}):null:this.props.children}}var i=r(212),l=r.n(i),c=r(825),u=r.n(c),d=r(957),p=r.n(d),h=(e,t,r)=>new Promise(((n,o)=>{var s=e=>{try{i(r.next(e))}catch(e){o(e)}},a=e=>{try{i(r.throw(e))}catch(e){o(e)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);i((r=r.apply(e,t)).next())}));const k=(e,t)=>h(null,null,(function*(){const r=e.video&&"captions"in e.video?e.video.captions:[];if(!r)return"";let n=r.find((e=>e.code===t));if(!n&&r.length>0&&(n=r[0]),!n)return"";const o=n.key,s=yield(e=>h(null,null,(function*(){try{const t=yield fetch(`https://articulateusercontent.com/${e}`,{method:"GET"});return t.ok&&t.body?yield t.text():(console.error(`Failed to fetch subtitle from CDN: ${e}`,{status:t.status,statusText:t.statusText}),"")}catch(t){return console.error(`Failed to fetch subtitle from CDN: ${e}`,{error:t}),""}})))(o);return""===s?"":(e=>{try{const{cues:t}=p().parse(e);return t.map((e=>{var t,r;return r=String(null!=(t=e.text)?t:""),u()(r,{allowedTags:[],allowedAttributes:{}}).replace(/\s+/g," ").trim()})).filter(Boolean).join("\n").trim()}catch(e){return console.error("Failed to strip subtitle text",{error:e}),""}})(s)}));var m=(e,t,r)=>new Promise(((n,o)=>{var s=e=>{try{i(r.next(e))}catch(e){o(e)}},a=e=>{try{i(r.throw(e))}catch(e){o(e)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);i((r=r.apply(e,t)).next())}));const x=e=>!l()(e),j=e=>u()(e,{allowedTags:[],allowedAttributes:{}}).replace(/([.!?])(?=[A-Z])/g,"$1 "),b=e=>"caption"in e&&e.caption||"description"in e&&e.description||"heading"in e&&e.heading||"paragraph"in e&&e.paragraph||"type"in e&&e.type||"value"in e&&e.value||"id"in e&&e.id,C=e=>e.blockContents.filter(x).length>0,f=e=>[j(`Lesson Title: '${e.title}'`)],L=(e,t,...r)=>m(null,[e,t,...r],(function*(e,t,r={}){const{shouldLabelBlock:n=!0,filters:o=[]}=r,s=yield Promise.all(((e,t)=>((e,t)=>e.filter((e=>t.every((t=>t(e))))))(e.items,null!=t?t:[]))(e,o).filter(b).map((e=>m(null,null,(function*(){return j(yield((e,t,...r)=>m(null,[e,t,...r],(function*(e,t,r={}){const{shouldLabelBlock:n=!0}=r;switch(null==e?void 0:e.family){case"chart":return(e=>{const t=e.items.map((e=>`'${e.type} - ${e.value}'`)).join("\n");return`${e.title} ${e.variant} chart showing the following: ${t}`})(e);case"flashcard":return(e=>{const t=e.items.map((e=>`'${e.front.description}\n ${e.back.description}'`));return`Flashcard ${"flashcard"===e.variant?"grid":"stack"}: ${t.join("\n")}`})(e);case"image":return(e=>{return["centered","full","hero","text aside","text overlay"].includes(e.variant)?e.items.map((t=e.variant,e=>{const{caption:r}=e||{},n=r,o="paragraph"in e?e.paragraph:void 0;let s="";return"text overlay"===t?s=n||"":n&&o?s=`Image with caption '${n}' followed by text '${o}'`:n?s=`Image with caption '${n}'`:o&&(s=`Image with text '${o}'`),s})).join("\n"):"";var t})(e);case"impact":return(e=>{if(!["a","b","c","d","note"].includes(e.variant))return"";const t=e.items.map((e=>`'${e.paragraph}'`)).join("\n");return`Impact ${"note"===e.variant?"note":"statement"}: ${t}`})(e);case"interactive":return((e,t)=>{var r;const{shouldLabelBlock:n=!0}=t,o=null==(r=e.items)?void 0:r.map((e=>`'${e.title}\n ${e.description}'`)).join("\n"),s=e.variant.charAt(0).toUpperCase()+e.variant.slice(1);return`${n?`${s}: `:""}${o}`})(e,{shouldLabelBlock:n});case"interactive-fullscreen":return((e,t)=>{var r;switch(e.variant){case"process":return((e,t)=>{const r=["intro","step","summary"];return`${t?"Process: ":""} ${e.items.toSorted(((e,t)=>r.indexOf(e.type)-r.indexOf(t.type))).filter((e=>!e.isHidden)).map((e=>`'${e.title}\n ${e.description}'`)).join("\n")}`})(e,null==(r=null==t?void 0:t.shouldLabelBlock)||r);case"timeline":return(e=>`Timeline: ${e.items.map((e=>`${e.date}\n ${e.title}\n ${e.description}`)).join("\n")}`)(e);case"labeledgraphic":return(e=>`Labeled graphic: ${e.items.map((e=>`${e.title}\n ${e.description}`)).join("\n")}`)(e);case"sorting":return(e=>{const t=e.items.map(((t,r)=>{var n;return`Sorting Item ${r+1}: Title - ${t.title} Pile - ${null==(n=e.piles.find((e=>e.id===t.pileId)))?void 0:n.title}`})).join("\n");return`Sorting Piles:\n${e.piles.map(((e,t)=>`Sorting Pile ${t+1}: Title - ${e.title}`)).join("\n")}, Sorting Items:\n${t}`})(e);default:return""}})(e,{shouldLabelBlock:n});case"knowledgeCheck":return(e=>{var t;if(["matching","fillin"].includes(e.variant))return"";const r=e.items[0];return`Knowledge Check: ${"title"in r?r.title:""}\n ${"answers"in r?null==(t=r.answers)?void 0:t.map(((e,t)=>`answer ${t+1}: ${null==e?void 0:e.title} - correct: ${null==e?void 0:e.correct}`)).join("\n"):""}`})(e);case"list":return((e,t)=>{var r;const n=null==(r=null==t?void 0:t.shouldLabelBlock)||r;return["bulleted","checkboxes","numbered"].includes(e.variant)?`${n?"List: ":""} ${e.items.map(((t,r)=>`${"numbered"===e.variant?r+1:""} ${t.paragraph}`)).join("\n")}`:""})(e,{shouldLabelBlock:n});case"quote":return(e=>["a","b","c","d","background","carousel"].includes(e.variant)?e.items.map((e=>e.name?`Quote by ${e.name}: '${e.paragraph}'`:`'${e.paragraph}'`)).join("\n"):"")(e);case"text":return((e,t)=>{const{shouldLabelBlock:r=!0}=t,n=e.items.map((t=>((e,t)=>{const r="heading"in t?`${t.heading}`:"",n="paragraph"in t&&"string"==typeof t.paragraph?`${t.paragraph.replaceAll("</p>","\n</p>")}`:"";switch(e){case"heading":case"subheading":return`'${r}'`;case"heading paragraph":case"subheading paragraph":return`'${r}\n ${n}'`;case"paragraph":case"table":case"two column":case"three column":case"four column":return`'${n}'`;default:return""}})(e.variant,t))),o=e.variant[0].toUpperCase()+e.variant.slice(1);return`${r?o:""} ${n.filter((e=>e.length)).join("\n")}`})(e,{shouldLabelBlock:n});case"multimedia":return yield((e,t)=>h(null,null,(function*(){if(!["video"].includes(e.variant))return"";const r=yield Promise.all(e.items.map((r=>((e,t,r)=>h(null,null,(function*(){const{caption:e,media:n}=r||{},o=yield k(n,t);let s="";return o&&e?s=`Video with caption '${e}' and subtitle '${o}'`:e?s=`Video with caption '${e}'`:o&&(s=`Video with subtitle '${o}'`),s})))(e.variant,t,r))));return r.join("\n")})))(e,t);default:return""}})))(e,t,{shouldLabelBlock:n}))})))));return{context:f(e),blockContents:s,lessonId:e.id}})),g=e=>j(`Course Title: '${e}'`),y="https://rise.articulate.com"===window.location.origin,v=(e,t,r,n,o,s,a=!0)=>{return i=function*(){try{const i=yield fetch("https://api.articulate.com/ai-learner/chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},credentials:y?"include":"omit",body:JSON.stringify({prompt:e,courseContext:r,lessonIndex:n,chatHistory:o})});return y&&a&&401===i.status?(yield s(),v(e,t,r,n,o,s,!1)):i.ok&&i.body?i.body:(console.error("Failed to fetch from /api/chat",{status:i.status,statusText:i.statusText}),null)}catch(e){return console.error("Failed to fetch from /api/chat",{error:e}),null}},new Promise(((e,t)=>{var r=e=>{try{o(i.next(e))}catch(e){t(e)}},n=e=>{try{o(i.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);o((i=i.apply(null,null)).next())}));var i};var $=(e,t,r)=>new Promise(((n,o)=>{var s=e=>{try{i(r.next(e))}catch(e){o(e)}},a=e=>{try{i(r.throw(e))}catch(e){o(e)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);i((r=r.apply(e,t)).next())}));const w=e=>{if(""===e)return!1;const t=e.lastIndexOf("<");return-1===t||-1!==e.slice(t+1).indexOf(">")},M=({className:e})=>(0,n.jsxs)("svg",{className:e,width:"90",height:"91",viewBox:"0 0 90 91",fill:"none",children:[(0,n.jsx)("path",{d:"M45 90C69.5767 90 89.5 70.0767 89.5 45.5C89.5 20.9233 69.5767 1 45 1C20.4233 1 0.5 20.9233 0.5 45.5C0.5 70.0767 20.4233 90 45 90Z",fill:"white",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M28.3154 14.3287V18.1165",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M26.4219 16.2226H30.2097",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M82.9023 38.5367V42.3245",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M81.0078 40.4306H84.7957",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M49.1832 21.2698C49.281 20.467 48.8929 19.7594 48.3165 19.6892C47.7401 19.619 47.1936 20.213 47.0959 21.0158C46.9982 21.8186 47.3862 22.5263 47.9626 22.5964C48.539 22.6666 49.0855 22.0727 49.1832 21.2698Z",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M21.7242 51.7933C22.1317 51.6993 22.3557 51.1624 22.2246 50.594C22.0934 50.0257 21.6569 49.6411 21.2494 49.7351C20.842 49.8291 20.618 50.366 20.7491 50.9344C20.8802 51.5027 21.3168 51.8873 21.7242 51.7933Z",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M18.1646 52.2681C18.5721 52.1741 18.7961 51.6372 18.665 51.0688C18.5339 50.5005 18.0973 50.1159 17.6899 50.2099C17.2824 50.3039 17.0584 50.8408 17.1895 51.4092C17.3207 51.9775 17.7572 52.3621 18.1646 52.2681Z",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M15.0797 53.6917C15.4871 53.5977 15.7111 53.0608 15.58 52.4925C15.4489 51.9241 15.0123 51.5395 14.6049 51.6335C14.1975 51.7275 13.9735 52.2645 14.1046 52.8328C14.2357 53.4012 14.6723 53.7857 15.0797 53.6917Z",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M12.4693 56.5387C12.8768 56.4447 13.1008 55.9078 12.9697 55.3394C12.8386 54.7711 12.402 54.3865 11.9945 54.4805C11.5871 54.5745 11.3631 55.1114 11.4942 55.6798C11.6253 56.2481 12.0619 56.6327 12.4693 56.5387Z",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M63.1237 21.9202C63.2214 21.1174 62.8333 20.4097 62.2569 20.3395C61.6805 20.2694 61.134 20.8633 61.0363 21.6661C60.9386 22.4689 61.3266 23.1766 61.9031 23.2468C62.4795 23.317 63.026 22.723 63.1237 21.9202Z",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M83.0923 65.7919C83.0923 65.7919 81.6683 60.5706 79.7697 56.5359C77.871 52.5013 76.8125 49.5465 76.6297 48.6493C76.447 47.7522 74.0737 44.1946 74.0737 43.4826C74.0737 42.7706 73.1243 37.0746 73.3617 35.8879C73.3617 35.8879 73.1243 25.4453 70.9883 21.4106C68.8523 17.3759 64.5803 12.8666 61.495 12.3919C58.4097 11.9173 51.0523 9.54392 45.5937 13.8159C45.5937 13.8159 40.847 11.6799 38.711 12.1546C36.575 12.6293 35.863 17.4993 38.711 20.4043C38.711 20.4043 35.863 26.3946 35.863 28.2933C35.863 30.1919 35.3883 36.5999 35.151 39.9226C34.9137 43.2453 33.015 48.4666 32.0657 51.5519C31.1163 54.6373 30.167 56.0613 30.167 56.0613",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M9.99316 58.1973C10.7052 59.1467 13.5532 64.368 14.0278 66.504C14.5025 68.64 17.1132 71.488 17.8252 73.3867C18.5372 75.2853 21.8598 81.456 26.1318 81.9307C30.4038 82.4053 31.1158 81.2187 31.1158 81.2187",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M38.9481 65.792C38.9481 65.792 37.9987 64.6054 36.1001 63.4187C34.2014 62.232 32.0654 59.6214 30.8787 58.4347C29.6921 57.248 27.9429 56.0519 27.511 54.0393C27.0814 52.0267 25.8924 49.0719 24.3497 48.6495C22.807 48.227 20.2153 45.6804 20.2153 45.6804C20.2153 45.6804 19.2209 45.6187 18.8768 46.4494C18.5327 47.28 17.4813 45.6258 17.2962 47.1661C17.111 48.7064 15.2242 45.9866 14.7425 48.6518C14.263 51.3171 13.7884 48.4691 11.415 51.7917",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M73.8332 61.3278C73.8332 61.3278 68.3769 69.8267 66.4782 71.9627C64.5795 74.0987 58.8907 78.3707 59.2443 82.9987",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M50.5771 31.8533C50.5771 31.8533 50.5771 33.5147 52.0011 33.5147",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M19.1235 59.9038C19.1235 59.9038 17.4219 61.971 15.9623 62.6948C14.5027 63.4187 13.5248 61.3729 13.8951 59.9038C14.2653 58.4347 17.0635 57.0866 18.3926 56.8113C19.724 56.536 23.0467 54.9506 26.132 56.8113C29.2173 58.672 23.8892 59.2962 22.1614 59.2203",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M42.957 16.2653L45.5938 13.816",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M66.5312 15.0406C66.5312 15.0406 69.7898 13.104 72.4076 13.816C75.0254 14.528 73.1244 20.224 70.9884 21.4107",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M39.5576 13.8445C40.609 13.816 41.7957 15.24 41.7957 15.24",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M68.6143 16.4267C68.6143 16.4267 69.3263 15.7147 70.7503 15.4773",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M55.205 25.8013H53.2589L52.357 27.2253C52.357 27.2253 51.645 27.9065 52.001 28.6327C52.357 29.3613 53.1877 31.0227 55.3237 31.0227C56.2944 31.0227 57.2224 30.4293 58.11 29.5726C58.4969 29.1999 58.6464 28.056 58.3711 27.7047C57.9367 27.1494 57.875 26.5015 57.1037 25.8013H55.205Z",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M53.1885 28.5307C53.1885 28.5307 53.1885 27.8187 54.1378 27.8187",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M56.3945 27.8187C56.3945 27.8187 57.0543 27.8187 57.3771 28.412",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M48.6787 25.208C48.6787 25.208 50.2261 21.3347 54.7924 21.1353C54.7924 21.1353 59.5462 21.4107 62.0643 25.208",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M48.1211 37.2527C48.1211 37.2527 49.8655 43.9573 52.0015 45.3813",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M60.5457 44.1947C60.5457 44.1947 60.2846 45.9865 59.2285 48.6494",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M20.642 37.051C19.3486 37.0842 18.0219 36.9323 16.9562 36.2702L12.7744 65.4764C14.4927 66.7438 16.4958 66.0104 16.4958 66.0104L20.6444 37.051H20.642Z",fill:"#00ADFF"}),(0,n.jsx)("path",{d:"M17.2039 36.4173L16.9404 36.3793C17.135 36.4529 17.3296 36.5146 17.5243 36.5692C17.4151 36.5217 17.3083 36.4719 17.2039 36.4173Z",fill:"#00ADE4"}),(0,n.jsx)("path",{d:"M16.4939 66.0103C16.4939 66.0103 14.4908 66.746 12.7725 65.4763L18.0484 28.6422C20.0182 28.1461 21.7698 29.1762 21.7698 29.1762L16.4939 66.0103Z",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M16.9404 36.3793C18.7418 37.0534 20.6618 36.9133 20.6618 36.9133",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M20.2129 26.7839L20.6638 23.6392",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M15.7058 31.4783L12.5469 31.8153",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M23.2227 32.5535L26.1585 33.7662",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M16.3991 28.0607L14.4316 25.5663",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M23.3574 29.0575L25.9443 27.2159",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M15.623 47.7381C15.623 47.7381 16.9212 49.7151 16.3041 50.1589C15.687 50.6027 17.9631 53.6501 16.4703 53.669C14.9774 53.688 17.9536 55.7861 15.2788 56.517C12.6041 57.248 16.7669 59.8991 15.2788 60.7084C13.7908 61.52 13.0859 61.5177 11.7758 61.2827C10.4657 61.0454 9.04171 58.9094 9.27905 57.248C9.51638 55.5867 9.1485 46.0601 15.6206 47.7381H15.623Z",fill:"white",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M65.755 38.3753C67.2953 37.4829 69.2675 38.8119 69.0587 40.5872L68.6457 44.1282C68.5532 44.8758 68.8712 45.621 69.4716 46.1171L72.3315 48.4382C73.6131 49.4801 73.3948 51.4523 71.9186 52.0646L67.1054 54.0772C66.5263 54.3217 66.0967 54.8011 65.9354 55.4039L64.7582 59.6735C64.2598 61.4749 61.8129 61.7122 60.8137 60.0509L58.241 55.7647C57.8613 55.1381 57.2039 54.7275 56.48 54.6634L52.1415 54.3003C50.2975 54.1437 49.3814 51.927 50.6297 50.6335L53.7198 47.4533C54.166 46.9928 54.3701 46.3402 54.2657 45.678L53.594 41.565C53.3116 39.8254 55.1082 38.5936 56.6865 39.4338L59.347 40.8483C60.0281 41.209 60.809 41.2019 61.4545 40.8435L65.7431 38.3681L65.755 38.3776V38.3753Z",fill:"#FFB82D"}),(0,n.jsx)("path",{d:"M45 90C69.5767 90 89.5 70.0767 89.5 45.5C89.5 20.9233 69.5767 1 45 1C20.4233 1 0.5 20.9233 0.5 45.5C0.5 70.0767 20.4233 90 45 90Z",stroke:"black",strokeWidth:"0.474667",strokeLinecap:"round",strokeLinejoin:"round"})]});var W=r(842),P=r(685),A=r(656),S=Object.defineProperty,T=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,B=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))_.call(t,r)&&B(e,r,t[r]);if(T)for(var r of T(t))I.call(t,r)&&B(e,r,t[r]);return e};const E={"sparkles-solid":P.p7g,lightbulb:A.rC2,"magnifying-glass":A.$UM,list:A.ITF,"arrow-down-left-and-arrow-up-right-to-center":A.hLQ,"pen-to-square":A.LFz};function O({"aria-label":e,className:t,classNameIcon:r,color:o,name:s,rotation:a,spin:i,style:l,styleIcon:c}){return(0,n.jsx)("span",{className:t,style:N({color:o},l),children:(0,n.jsx)(W.g,{"aria-label":e,className:r,icon:E[s],rotation:a,spin:i,style:c})})}const F=[{icon:"lightbulb",label:"Explain this in simpler terms"},{icon:"magnifying-glass",label:"Help me apply this to my job"},{icon:"list",label:"Summarize this training"}],z=({onSubmit:e})=>{const t=(0,o.useCallback)((t=>{e(t.label)}),[e]);return(0,n.jsxs)("div",{className:"ldf__blank",children:[(0,n.jsx)(M,{className:"ldf__illustration"}),(0,n.jsx)(s.Arc.h4,{size:"subheading-lg",children:"Hey there, need a hand?"}),(0,n.jsx)("ul",{children:F.map((e=>(0,n.jsx)("li",{children:(0,n.jsx)(s.ArcButton,{size:"md",icon:(0,n.jsx)(O,{name:e.icon}),text:e.label,variant:"ai-secondary",onClick:()=>t(e)})},e.label)))})]})},Z=e=>Array.from(e).reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)|0),0),D=["h4","h2","p","ol","ul","li","em","strong"],H=(e,t,r=0)=>{const o=((e,t)=>t instanceof Array?e+"-"+t.map((e=>Z(e))).join("-"):e+"-"+Z(t))(r,t);switch(e.toLowerCase()){case"ol":return(0,n.jsx)("ol",{children:t},o);case"ul":return(0,n.jsx)("ul",{children:t},o);case"h4":return(0,n.jsx)(s.Arc.h4,{size:"subheading-lg",children:t},o);case"h2":return(0,n.jsx)(s.Arc.h2,{size:"heading-md",children:t},o);case"strong":return(0,n.jsx)("strong",{children:t},o);case"em":return(0,n.jsx)("em",{children:t},o);case"li":return(0,n.jsx)("li",{children:t},o);case"p":return(0,n.jsx)(s.Arc.p,{size:"body-md",children:t},o);default:return t}},q=(e,t=0)=>H(e.tagName,Array.from(e.childNodes).map(((e,t)=>e.tagName?q(e,t):e.nodeType===Node.TEXT_NODE?e.textContent:null)),t),R=({content:e,role:t})=>{const r=u()(e,{allowedTags:[...D],allowedAttributes:{}});if("user"===t)return H("p",[r]);const n=(new DOMParser).parseFromString(r,"text/html");return q(n.body)},U=({exchange:e})=>{const t="assistant"===e.role&&0===e.content.length?"• • •":e.content;return(0,n.jsx)("li",{className:"ldf__bubble "+("user"===e.role?"ldf__user":"ldf__assistant"),children:(0,n.jsx)(R,{content:t,role:e.role})})},V=({exchanges:e,currentExchange:t})=>{const r=(0,o.useMemo)((()=>{const r=[...e];return null!==t&&r.push(t),r.toReversed()}),[e,t]);return(0,n.jsx)("ul",{className:"ldf__chat",children:r.map(((e,t)=>{const r=Z(`${t}-${e.role}-${e.content}`);return(0,n.jsx)(U,{exchange:e},r)}))})};var K=(e,t,r)=>new Promise(((n,o)=>{var s=e=>{try{i(r.next(e))}catch(e){o(e)}},a=e=>{try{i(r.throw(e))}catch(e){o(e)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);i((r=r.apply(e,t)).next())}));const Q=({apiKey:e,courseContext:t,lessonIndex:r,currentLocale:a,resetSession:i})=>{const l=(0,o.useRef)(null),[c,u]=(0,o.useState)(""),d=(0,o.useRef)((()=>Promise.resolve())),{exchanges:p,currentExchange:h,addUserPrompt:k,updateAssistantResponse:m,clearExchanges:x}=(()=>{const[e,t]=(0,o.useState)([]),[r,n]=(0,o.useState)(null);return{exchanges:e,currentExchange:r,addUserPrompt:(0,o.useCallback)((e=>{t((t=>[...t,{role:"user",content:e}])),n({role:"assistant",content:""})}),[]),updateAssistantResponse:(0,o.useCallback)(((e,r)=>{r?(t((t=>[...t,e])),n(null)):n(e)}),[]),clearExchanges:(0,o.useCallback)((()=>{t([]),n(null)}),[])}})(),j=(new Date).toLocaleDateString(a,{weekday:"long",month:"short",day:"numeric"}),b={id:"text-input",type:"text",value:c,onChange:({value:e})=>u(e),placeholder:"Ask me anything"},C=(0,o.useCallback)((n=>K(null,null,(function*(){if(yield d.current(),d.current=()=>Promise.resolve(),k(n),u(""),n.length>0){const o=yield v(n,e,t,r,p,i);if(o){const e=((e,t,r=200)=>{const n=new TextDecoder("utf-8"),o=e.getReader();let s="",a=null,i=!1,l=!1;return $(null,null,(function*(){for(;!l;){const{done:e,value:l}=yield o.read(),c=n.decode(l);if(s+=c,!i&&w(s)&&(i=!0,t({role:"assistant",content:s},!1),a=setTimeout((()=>{i=!1}),r)),e)break}a&&clearTimeout(a),t({role:"assistant",content:s},!0)})),()=>$(null,null,(function*(){l=!0;try{yield o.cancel()}catch(e){console.warn("Error canceling reader",{},e)}}))})(o,m,200);d.current=e}}}))),[k,m,u,e,t,r,d,p,i]),f=(0,o.useCallback)((e=>K(null,null,(function*(){e.preventDefault(),c.length>0&&(yield C(c))}))),[c,C]),L=(0,o.useCallback)((()=>K(null,null,(function*(){yield d.current(),d.current=()=>Promise.resolve(),x()}))),[x,d]),g=0===p.length&&null===h;return(0,n.jsxs)("div",{className:"ldf__popout-dialog",children:[(0,n.jsxs)("div",{className:"ldf__header",children:[(0,n.jsx)(s.ArcButton,{icon:(0,n.jsx)(O,{name:"arrow-down-left-and-arrow-up-right-to-center"}),variant:"secondary",layout:"icon",shape:"square",size:"md",popoverTarget:"ai-tutor-popover"}),!g&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Arc.p,{size:"body-sm",variant:"secondary",children:j}),(0,n.jsx)(s.ArcButton,{icon:(0,n.jsx)(O,{name:"pen-to-square"}),variant:"secondary",layout:"icon",shape:"square",size:"md",onClick:L})]})]}),g?(0,n.jsx)(z,{onSubmit:C}):(0,n.jsx)(V,{exchanges:p,currentExchange:h}),(0,n.jsx)("form",{onSubmit:f,children:(0,n.jsx)(s.ArcTextInput,{ref:l,layout:"fill",size:"lg",variant:"outline",inputProps:b})}),(0,n.jsx)(s.Arc.p,{size:"body-xs",variant:"secondary",align:"center",className:"ldf__disclaimer",children:"AI Tutor isn't perfect. Double check important information."})]})};var G=Object.defineProperty,J=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,ee=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,te=(e,t)=>{for(var r in t||(t={}))X.call(t,r)&&ee(e,r,t[r]);if(J)for(var r of J(t))Y.call(t,r)&&ee(e,r,t[r]);return e};const re=({apiKey:e,course:t,currentLessonId:r,currentLocale:a,rtl:i,resetSession:l})=>{const c={size:"lg",icon:(0,n.jsx)(O,{name:"sparkles-solid"}),text:"AI Tutor"},[u,d]=(0,o.useState)(!1),[p,h]=(0,o.useState)(null),[k,x]=(0,o.useState)(-1);return(0,o.useEffect)((()=>{let e=!1;var n;return n=function*(){try{const{context:n,currentLessonIndex:o}=yield((e,t,r,...n)=>m(null,[e,t,r,...n],(function*(e,t,r,n={}){const o=e.lessons.filter((({type:e})=>"blocks"===e)),s=yield((e,t,r,...n)=>m(null,[e,t,r,...n],(function*(e,t,r,n={}){const{filters:o=[],shouldLabelBlock:s=!0}=n,a=yield Promise.all(t.map((e=>L(e,r,{filters:o,shouldLabelBlock:s}))));return{context:[g(e)],lessonContents:a}})))(e.title,o,t,n);let a=-1;const i=s.lessonContents.filter(C).map(((e,t)=>(e.lessonId===r&&(a=t),[...e.context,...e.blockContents].join("\n"))));return{context:{title:s.context[0],lessons:i},currentLessonIndex:a}})))(t,a,r);e||(h(n),x(o))}catch(t){e||(h(null),x(-1))}},new Promise(((e,t)=>{var r=e=>{try{s(n.next(e))}catch(e){t(e)}},o=e=>{try{s(n.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,o);s((n=n.apply(null,null)).next())})),()=>{e=!0}}),[t,a,r]),(0,o.useMemo)((()=>r&&t.lessons.some((e=>e.id===r&&"quiz"===e.type))),[t,r])?null:(0,n.jsx)("div",{className:"ldf__wrapper",children:(0,n.jsx)(s.ArcPopover,{id:"ai-tutor-popover",popover:"manual",anchorAt:"top-end",offset:20,onToggle:()=>d(!u),anchorProps:c,open:u,children:p&&(0,n.jsx)(Q,{apiKey:e,courseContext:p,lessonIndex:k,currentLocale:a,rtl:i,resetSession:l})})})},ne=e=>(0,n.jsx)(a,{children:(0,n.jsx)(re,te({},e))})}}]);